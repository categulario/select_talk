{"version":3,"sources":["../app.js"],"names":["request","XMLHttpRequest","scheduleData","open","onload","status","initApp","JSON","parse","responseText","console","log","onerror","send","Vue","component","props","computed","progressBarWidth","from_hour","hourToDecimal","from","to_hour","to","cur_hour","hour","value","methods","pieces","split","map","p","parseInt","window","App","el","data","title","schedule","section","left_icon","left_action","currentHour","moment","format","sections","home","subs","now","default_filter","default_key","next","created","self","setInterval","talksHappeningNow","day","filter","talk","nextTime","marks","find","item","talksHappeningNext","talksNowClick","changeSection","talksNextClick","runLeftAction","sub"],"mappings":"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","file":"app.js","sourcesContent":["var request = new XMLHttpRequest();\nvar scheduleData = [];\n\nrequest.open('GET', 'schedule.json', true);\nrequest.onload = () => {\n\tif (request.status == 200) {\n\t\tinitApp(JSON.parse(request.responseText));\n\t} else {\n\t\tconsole.log('failed loading schedule data');\n\t}\n};\nrequest.onerror = () => {\n\tconsole.log('server error or something');\n};\nrequest.send();\n\n// the progress bar component\nVue.component('item-progress', {\n\tprops: [\n\t\t'from',\n\t\t'to',\n\t\t'hour',\n\t],\n\n\tcomputed: {\n\t\tprogressBarWidth: function () {\n\t\t\tvar from_hour = this.hourToDecimal(this.from);\n\t\t\tvar to_hour = this.hourToDecimal(this.to);\n\t\t\tvar cur_hour = this.hourToDecimal(this.hour);\n\t\t\tvar value = (cur_hour - from_hour)/(to_hour - from_hour)*100;\n\n\t\t\tif (value < 0) {\n\t\t\t\treturn '0%';\n\t\t\t} else {\n\t\t\t\treturn `${value}%`;\n\t\t\t}\n\t\t},\n\t},\n\n\tmethods: {\n\t\thourToDecimal: function (hour) {\n\t\t\tvar pieces = hour.split(':').map(p => parseInt(p));\n\n\t\t\treturn pieces[0] + pieces[1]/60;\n\t\t},\n\t}\n});\n\nfunction initApp(scheduleData) {\n\twindow.App = new Vue({\n\t\tel: '#app',\n\n\t\tdata: {\n\t\t\ttitle: 'Encuentra charlas',\n\t\t\tschedule: scheduleData,\n\t\t\tsection: 'home',\n\t\t\tleft_icon: 'fa-bars',\n\t\t\tleft_action: null,\n\t\t\tcurrentHour: moment().format('HH:mm'),\n\t\t\tsections: {\n\t\t\t\thome: {\n\t\t\t\t\ttitle: 'Encuentra charlas',\n\t\t\t\t\tleft_icon: 'fa-bars',\n\t\t\t\t\tleft_action: null,\n\t\t\t\t},\n\t\t\t\tschedule: {\n\t\t\t\t\ttitle: 'Charlas',\n\t\t\t\t\tleft_icon: 'fa-arrow-left',\n\t\t\t\t\tleft_action: 'home',\n\n\t\t\t\t\tsubs: {\n\t\t\t\t\t\tnow: {\n\t\t\t\t\t\t\ttitle: 'Charlas ahora',\n\t\t\t\t\t\t\tdefault_filter: 'talksHappeningNow',\n\t\t\t\t\t\t\tdefault_key: 'area',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tnext: {\n\t\t\t\t\t\t\ttitle: 'Charlas siguientes',\n\t\t\t\t\t\t\tdefault_filter: 'talksHappeningNext',\n\t\t\t\t\t\t\tdefault_key: 'area',\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\n\t\tcreated: function () {\n\t\t\tvar self = this;\n\n\t\t\tsetInterval(function () {\n\t\t\t\tself.currentHour = moment().format('HH:mm');\n\t\t\t}, 2000);\n\t\t},\n\n\t\tcomputed: {\n\t\t\ttalksHappeningNow: function () {\n\t\t\t\tvar now = this.currentHour;\n\t\t\t\tvar day = moment().format('d');\n\n\t\t\t\treturn this.schedule.schedule.filter((talk) => {\n\t\t\t\t\treturn talk.day == day && talk.from <= now && talk.to > now;\n\t\t\t\t});\n\t\t\t},\n\n\t\t\tnextTime: function () {\n\t\t\t\tvar now = this.currentHour;\n\n\t\t\t\treturn this.schedule.marks.find(item => item > now);\n\t\t\t},\n\n\t\t\ttalksHappeningNext: function () {\n\t\t\t\tvar day = moment().format('d');\n\t\t\t\tvar nextTime = this.nextTime;\n\n\t\t\t\treturn this.schedule.schedule.filter((talk) => {\n\t\t\t\t\treturn talk.day == day && talk.from <= nextTime && talk.to > nextTime;\n\t\t\t\t});\n\t\t\t},\n\t\t},\n\n\t\tmethods: {\n\t\t\ttalksNowClick: function () {\n\t\t\t\tthis.changeSection('schedule', 'now');\n\t\t\t},\n\n\t\t\ttalksNextClick: function () {\n\t\t\t\tthis.changeSection('schedule', 'next');\n\t\t\t},\n\n\t\t\trunLeftAction: function () {\n\t\t\t\tif (this.left_action === null) {\n\t\t\t\t\t// display left menu\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.changeSection(this.left_action);\n\t\t\t},\n\n\t\t\tchangeSection: function (section, sub) {\n\t\t\t\tthis.section = section;\n\t\t\t\tthis.title = this.sections[section].title;\n\t\t\t\tthis.left_icon = this.sections[section].left_icon;\n\t\t\t\tthis.left_action = this.sections[section].left_action;\n\n\t\t\t\tif (this.sections[section].subs && sub) {\n\t\t\t\t\tthis.title = this.sections[section].subs[sub].title;\n\t\t\t\t\tthis.default_filter = this.sections[section].subs[sub].default_filter;\n\t\t\t\t\tthis.default_key = this.sections[section].subs[sub].default_key;\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t});\n}\n"]}